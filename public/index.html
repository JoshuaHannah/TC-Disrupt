<!DOCTYPE HTML>
<html>

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="initial-scale=1, maximum-scale=1,user-scalable=no">

<!--JS-->
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

<!--CSS-->
<link rel="stylesheet" href="http://js.arcgis.com/3.11/dijit/themes/claro/claro.css">
<link rel="stylesheet" href="http://js.arcgis.com/3.11/esri/css/esri.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
<link rel="stylesheet" href="style.css">

<script>var dojoConfig = {parseOnLoad: true};</script>
<script src="http://js.arcgis.com/3.11/"></script>
<script>

	dojo.require("dijit.layout.BorderContainer");
    dojo.require("dijit.layout.ContentPane");
    dojo.require("esri.map");
    dojo.require("esri.layers.FeatureLayer");
    dojo.require("dijit.form.CheckBox");
    
    var map, featureLayer;
    var featureLayerUrl = "http://services.arcgis.com/XCbo5t7BF3Awl0lX/arcgis/rest/services/MonopolyStreets/FeatureServer/0";
    //var featureLayerUrl = "http://sampleserver3.arcgisonline.com/ArcGIS/rest/services/Petroleum/KSPetro/MapServer/1";

    function init() {
      map = new esri.Map("map", {
        basemap: "topo",
        center: [-0.1275,51.507222],
        zoom: 13
      });

      map.on("load", mapLoaded);

      map.on("update-start", function(){
        esri.show(dojo.byId("status"));
      });

      map.on("update-end", function(){
        esri.hide(dojo.byId("status"));
      });
    }

    function mapLoaded() {
      featureLayer = new esri.layers.FeatureLayer(featureLayerUrl);

      featureLayer.on("update-start", function(){
        dojo.style(dojo.byId("status"), "display", "");
      });
      featureLayer.on("update-end", function(){
        dojo.style(dojo.byId("status"), "display", "none");
      });
      
      map.addLayers([featureLayer]);
    }
    
    function toggleLayer(val){
      if(val.name === 'checkBM'){
        var basemap = map.getLayer(map.layerIds[0]);
        basemap.visible ? basemap.hide(): basemap.show();
      } else {
        featureLayer.visible ? featureLayer.hide():featureLayer.show();
      }
    }
    
    dojo.ready(init);


</script>

</head>

<body class="claro">

<div class="row">

<div class="col-md-9 mapcolumn">

<iframe class="mapbox" width='100%' height='100%' frameBorder='0' src='https://a.tiles.mapbox.com/v4/tcdisrupt.k04hc88j/attribution,zoompan,zoomwheel,geocoder,share.html?access_token=pk.eyJ1IjoidGNkaXNydXB0IiwiYSI6Ind2RjdORGcifQ.EMT4hNFxEd5cwWg1mro7Mw'></iframe>

</div>

<div class="col-md-3">
	

</div>

</div>

</body>

</html>